const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard-Dtvz00qj.js","assets/vue-HfZDSVjf.js","assets/rolldown-runtime-DGruFWvd.js","assets/vue-C4WgAt2e.css","assets/dashboard-DYNspkW9.css","assets/user-Bx4_9AsF.js","assets/axios-ChWArd3X.js","assets/user-CqROTLIC.css","assets/detail-CI7UC2wd.js","assets/detail-pV6roM3M.css","assets/login-B9I6oeyY.js","assets/login-BHoVi6TM.css"])))=>i.map(i=>d[i]);
import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{A as t,B as n,C as r,D as i,E as a,G as o,H as s,I as c,J as l,K as u,L as d,M as f,N as p,O as m,P as h,R as g,S as _,T as v,a as y,c as b,h as x,i as S,j as C,k as w,m as ee,n as T,p as E,q as D,r as O,t as k,w as A,x as te,y as ne}from"./vue-HfZDSVjf.js";import{t as re}from"./axios-ChWArd3X.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var j=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},ie={};function M(e,t){let n=g(`router-view`);return c(),C(`div`,null,[m(`main`,null,[p(n)])])}var N=j(ie,[[`render`,M]]),P=`/assets/logo-dark-CWeLYVWQ.svg`,F={class:`sidebar-header`},I={key:0,class:`sidebar-title`},L={class:`menu-container`},R=j(h({__name:`Sider`,props:{collapsed:{type:Boolean},activeMenu:{},onCollapseChange:{type:Function}},setup(e){let i=S(),o=[{path:`/dashboard`,name:`dashboard`,label:`首页`,icon:x},{path:`/users`,name:`users`,label:`用户管理`,icon:_}],f=e=>{i.push(e)};return(i,h)=>{let _=g(`el-menu-item`),v=g(`el-menu`),y=g(`el-aside`);return c(),w(y,{width:e.collapsed?`64px`:`220px`,class:D([`sidebar-container`,{"sidebar-collapsed":e.collapsed}])},{default:s(()=>[m(`div`,F,[m(`img`,{src:P,alt:`Logo`,class:D([`sidebar-logo`,{"sidebar-logo-collapsed":e.collapsed}])},null,2),e.collapsed?t(``,!0):(c(),C(`h2`,I,`管理系统`))]),m(`div`,L,[p(v,{"default-active":e.activeMenu,class:`el-menu-vertical`,"background-color":`#001529`,"text-color":`#fff`,"active-text-color":`#409eff`,"unique-opened":``,"collapse-transition":!1},{default:s(()=>[(c(),C(a,null,d(o,e=>p(_,{key:e.path,index:e.path,onClick:t=>f(e.path)},{title:s(()=>[m(`span`,null,l(e.label),1)]),default:s(()=>[p(u(r),{size:18},{default:s(()=>[(c(),w(n(e.icon)))]),_:2},1024)]),_:2},1032,[`index`,`onClick`])),64))]),_:1},8,[`default-active`])])]),_:1},8,[`width`,`class`])}}}),[[`__scopeId`,`data-v-fdc9d1b4`]]),z=re.create({baseURL:`http://localhost:8000/api`,timeout:1e4,headers:{"Content-Type":`application/json`}});z.interceptors.request.use(e=>{let t=localStorage.getItem(`token`);return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),z.interceptors.response.use(e=>e,e=>{let t=`请求失败，请稍后重试`;if(e.response){let{status:n,data:r}=e.response;switch(n){case 400:t=r.msg||`请求参数错误`;break;case 401:t=r.msg||`未授权，请重新登录`,localStorage.removeItem(`token`),window.location.href=`/login`;break;case 403:t=r.msg||`没有权限访问该资源`;break;case 404:t=r.msg||`请求的资源不存在`;break;case 500:t=r.msg||`服务器内部错误`;break;default:t=r.msg||`请求失败 (${n})`}}else t=e.request?`网络错误，请检查网络连接`:e.message;return console.error(`API Error:`,t),Promise.reject(Error(t))});var B={get:async(e,t)=>(await z.get(e,t)).data,post:async(e,t,n)=>(await z.post(e,t,n)).data,put:async(e,t,n)=>(await z.put(e,t,n)).data,delete:async(e,t)=>(await z.delete(e,t)).data};const V=async e=>{let t=await B.post(`/login`,new URLSearchParams({username:e.username,password:e.password}),{headers:{"Content-Type":`application/x-www-form-urlencoded`}});return t.data&&t.data.access_token&&localStorage.setItem(`token`,t.data.access_token),t},H=async()=>{try{return await B.post(`/logout`)}finally{localStorage.removeItem(`token`)}},U=async e=>B.get(`/users`,{params:e}),W=async e=>B.post(`/user`,e),G=async e=>B.get(`/user/${e}`),K=async(e,t)=>B.put(`/user/${e}`,t),q=async e=>B.delete(`/user/${e}`);var J={class:`header-left`},ae={class:`header-right`},oe={class:`user-info`},se={key:0,class:`user-name`},ce=j(h({__name:`Header`,props:{collapsed:{type:Boolean},onCollapseChange:{type:Function}},setup(e){let n=S(),r=O(),o=i(()=>{let e=[],t=r.matched;for(let n of t){if(n.path===`/`)continue;let t=``;switch(n.path){case`/dashboard`:t=`仪表盘`;break;case`/users`:t=`用户管理`;break;case`/users/:id`:t=`用户详情`;break;default:t=n.meta?.title||n.name||`未知`}e.push({path:n.path,title:t})}return e}),h=async()=>{try{await H(),b.success(`退出登录成功`),n.push(`/login`)}catch(e){b.error(`退出登录失败`),console.error(`Logout error:`,e)}};return(n,r)=>{let i=g(`el-icon`),_=g(`el-button`),v=g(`el-breadcrumb-item`),y=g(`el-breadcrumb`),b=g(`el-avatar`),x=g(`el-dropdown-item`),S=g(`el-dropdown-menu`),T=g(`el-dropdown`),D=g(`el-header`);return c(),w(D,{class:`header-container`},{default:s(()=>[m(`div`,J,[p(_,{link:``,onClick:r[0]||=t=>e.onCollapseChange(!e.collapsed),class:`header-collapse-btn`},{default:s(()=>[p(i,null,{default:s(()=>[e.collapsed?(c(),w(u(E),{key:0})):(c(),w(u(ee),{key:1}))]),_:1})]),_:1}),p(y,{"separator-class":`el-icon-arrow-right`,class:`header-breadcrumb`},{default:s(()=>[p(v,{to:{path:`/dashboard`}},{default:s(()=>[...r[1]||=[f(`首页`,-1)]]),_:1}),(c(!0),C(a,null,d(o.value,(e,t)=>(c(),w(v,{key:t,to:e.path},{default:s(()=>[f(l(e.title),1)]),_:2},1032,[`to`]))),128))]),_:1})]),m(`div`,ae,[p(T,null,{dropdown:s(()=>[p(S,null,{default:s(()=>[p(x,{divided:``},{default:s(()=>[p(i,null,{default:s(()=>[p(u(ne))]),_:1}),m(`span`,{onClick:h},`退出登录`)]),_:1})]),_:1})]),default:s(()=>[m(`span`,oe,[p(b,{size:32,class:`user-avatar`},{default:s(()=>[p(u(te))]),_:1}),e.collapsed?t(``,!0):(c(),C(`span`,se,`管理员`))])]),_:1})])]),_:1})}}}),[[`__scopeId`,`data-v-0e0d1924`]]),le=j(h({__name:`Footer`,setup(e){return(e,t)=>{let n=g(`el-footer`);return c(),w(n,{class:`footer-container`},{default:s(()=>[...t[0]||=[m(`span`,null,`© 2026 用户管理系统`,-1)]]),_:1})}}}),[[`__scopeId`,`data-v-54e13190`]]),ue=j(h({__name:`index`,setup(e){let t=O(),r=o(!1),a=i(()=>t.path),l=e=>{r.value=e};return(e,t)=>{let i=g(`router-view`),o=g(`el-main`),u=g(`el-container`);return c(),w(u,{class:`layout-container`},{default:s(()=>[p(R,{collapsed:r.value,"active-menu":a.value,"on-collapse-change":l},null,8,[`collapsed`,`active-menu`]),p(u,{class:`main-container`,direction:`vertical`},{default:s(()=>[p(ce,{collapsed:r.value,"on-collapse-change":l},null,8,[`collapsed`]),p(o,{class:`content-container`},{default:s(()=>[p(i,null,{default:s(({Component:e})=>[p(A,{name:`fade-transform`,mode:`out-in`},{default:s(()=>[(c(),w(n(e)))]),_:2},1024)]),_:1})]),_:1}),p(le)]),_:1})]),_:1})}}}),[[`__scopeId`,`data-v-d28416dc`]]),Y=`modulepreload`,de=function(e){return`/`+e},X={};const Z=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=de(t,n),t in X)return;X[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:Y,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};var fe=[{path:`/`,redirect:`/login`},{path:`/`,name:`layout`,component:ue,meta:{requiresAuth:!0},children:[{path:`/dashboard`,name:`dashboard`,meta:{icon:`HomeFilled`},component:()=>Z(()=>import(`./dashboard-Dtvz00qj.js`),__vite__mapDeps([0,1,2,3,4]))},{path:`/users`,name:`users`,meta:{icon:`User`},component:()=>Z(()=>import(`./user-Bx4_9AsF.js`),__vite__mapDeps([5,1,2,3,6,7]))},{path:`/users/:id`,name:`user-detail`,component:()=>Z(()=>import(`./detail-CI7UC2wd.js`),__vite__mapDeps([8,1,2,3,6,9])),meta:{title:`用户详情`}}]},{path:`/login`,name:`login`,component:()=>Z(()=>import(`./login-B9I6oeyY.js`),__vite__mapDeps([10,1,2,3,6,11])),meta:{requiresAuth:!1}}],Q=k({history:T(`/`),routes:fe});Q.beforeEach((e,t,n)=>{let r=!!localStorage.getItem(`token`);e.meta.requiresAuth&&!r?n({name:`login`}):e.path===`/login`&&r?n({name:`dashboard`}):n()});var pe=Q,$=v(N);$.use(y),$.use(pe),$.mount(`#app`);export{V as a,j as c,U as i,q as n,K as o,G as r,P as s,W as t};