var C=(h,f,i)=>new Promise((v,g)=>{var r=a=>{try{s(i.next(a))}catch(p){g(p)}},d=a=>{try{s(i.throw(a))}catch(p){g(p)}},s=a=>a.done?v(a.value):Promise.resolve(a.value).then(r,d);s((i=i.apply(h,f)).next())});import{v as R,r as m,j as T,x as b,J as w,K as o,M as t,B as j,a3 as c,S as q,u as A,az as I,ad as _,ap as J}from"./vue-chunks-COp0tDkU.js";import"./index-CMs-epuZ.js";import{g as K,d as L}from"./index-B9iJObkR.js";import{_ as F}from"./ContentWrap.vue_vue_type_script_setup_true_lang-D4ctoOpT.js";import G from"./SearchComponent-PQpVbQmo.js";import{_ as H}from"./Add.vue_vue_type_script_setup_true_lang-ClW3j57A.js";import{_ as O}from"./Edit.vue_vue_type_script_setup_true_lang-dbZplW5J.js";import{_ as Q}from"./Detail.vue_vue_type_script_setup_true_lang-Cw7lLJSk.js";import{b as z,l as W}from"./element-plus-B-YefleC.js";/* empty css                *//* empty css                  */const X={class:"action-bar"},de=R({__name:"Admin",setup(h){const f=I(),i=m([]),v=m(!1),g=m(0),r=m(1),d=m(10),s=m({page:r.value,size:d.value}),a=()=>C(this,null,function*(){v.value=!0;try{s.value.page=r.value,s.value.size=d.value;const l=yield K(s.value);i.value=l.data.items,g.value=l.data.total}catch(l){z.error("加载用户列表失败"),console.error("加载用户列表失败:",l)}finally{v.value=!1}}),p=()=>{a()},B=()=>{r.value=1,a()},S=()=>{r.value=1,a()},D=()=>{f.push("/users/create")},U=l=>{f.push(`/users/${l.id}/edit`)},V=l=>{f.push(`/users/${l.id}`)},M=l=>C(this,null,function*(){try{yield W.confirm(`确定要删除用户 ${l.username} 吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),yield L(l.id),z.success("删除成功"),a()}catch(e){e!=="cancel"&&(z.error("删除失败"),console.error("Delete user error:",e))}});return T(()=>{a()}),(l,e)=>{const y=_("el-button"),k=_("el-card"),u=_("el-table-column"),$=_("el-tag"),E=_("el-table"),N=_("el-pagination"),P=J("loading");return b(),w(A(F),null,{default:o(()=>[t(k,null,{default:o(()=>[t(G,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=n=>s.value=n),onSearch:B,onReset:S},null,8,["modelValue"]),j("div",X,[t(y,{type:"primary",onClick:D},{default:o(()=>e[3]||(e[3]=[c("创建用户")])),_:1})])]),_:1}),t(k,{class:"user-list-card",shadow:"never",border:"false",title:"用户列表"},{footer:o(()=>[t(N,{"current-page":r.value,"onUpdate:currentPage":e[1]||(e[1]=n=>r.value=n),"page-size":d.value,"onUpdate:pageSize":e[2]||(e[2]=n=>d.value=n),"page-sizes":[5,10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:g.value,onSizeChange:p,onCurrentChange:p},null,8,["current-page","page-size","total"])]),default:o(()=>[q((b(),w(E,{data:i.value,stripe:"",border:"",style:{width:"100%"}},{default:o(()=>[t(u,{prop:"id",label:"ID",width:"80"}),t(u,{prop:"username",label:"用户名"}),t(u,{prop:"name",label:"昵称"}),t(u,{prop:"status",label:"状态",width:"120"},{default:o(n=>[n.row.status?(b(),w($,{key:0,type:"success"},{default:o(()=>e[4]||(e[4]=[c(" ✅ 激活 ")])),_:1})):(b(),w($,{key:1,type:"danger"},{default:o(()=>e[5]||(e[5]=[c(" ❌ 未激活 ")])),_:1}))]),_:1}),t(u,{prop:"created_time",label:"创建时间",width:"180"}),t(u,{prop:"updated_time",label:"更新时间",width:"180"}),t(u,{label:"操作",width:"240"},{default:o(n=>[t(y,{size:"small",onClick:x=>V(n.row)},{default:o(()=>e[6]||(e[6]=[c("详情")])),_:2},1032,["onClick"]),t(y,{type:"primary",size:"small",onClick:x=>U(n.row)},{default:o(()=>e[7]||(e[7]=[c("编辑")])),_:2},1032,["onClick"]),t(y,{type:"danger",size:"small",onClick:x=>M(n.row)},{default:o(()=>e[8]||(e[8]=[c("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[P,v.value]])]),_:1}),t(H),t(O),t(Q)]),_:1})}}});export{de as default};
//# sourceMappingURL=Admin-GvET2SUI.js.map
