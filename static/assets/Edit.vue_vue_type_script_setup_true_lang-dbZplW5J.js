var b=(g,i,r)=>new Promise((v,e)=>{var m=s=>{try{n(r.next(s))}catch(c){e(c)}},p=s=>{try{n(r.throw(s))}catch(c){e(c)}},n=s=>s.done?v(s.value):Promise.resolve(s.value).then(m,p);n((r=r.apply(g,i)).next())});import{v as E,c as R,V as S,r as w,j,x as y,J as x,K as t,S as z,M as a,a3 as C,az as F,aH as H,ad as d,ap as I}from"./vue-chunks-COp0tDkU.js";import"./index-CMs-epuZ.js";import{a as J,u as K}from"./index-B9iJObkR.js";import{b as _}from"./element-plus-B-YefleC.js";const O=E({__name:"Edit",setup(g){const i=F(),r=H(),v=R(()=>r.params.id),e=S({username:"",name:"",status:!0,description:"",password:""}),m=w(!1),p=w(!1),n=w(!0),s=()=>b(this,null,function*(){p.value=!0;try{const l=(yield J(Number(v.value))).data;e.username=l.username,e.name=l.name,e.status=l.status,e.description=l.description||""}catch(f){_.error("加载用户数据失败"),console.error("Load user error:",f),i.push("/users")}finally{p.value=!1}}),c=()=>e.username?e.name?!0:(_.warning("请输入昵称"),!1):(_.warning("请输入用户名"),!1),k=()=>b(this,null,function*(){if(c()){m.value=!0;try{yield K(Number(v.value),e),_.success("用户更新成功"),i.push("/users")}catch(f){_.error("更新用户失败"),console.error("Update user error:",f)}finally{m.value=!1}}}),N=()=>{i.push("/users")};return j(()=>{s()}),(f,l)=>{const V=d("el-input"),u=d("el-form-item"),D=d("el-switch"),U=d("el-button"),M=d("el-form"),h=d("el-dialog"),B=I("loading");return y(),x(h,{title:"编辑用户",visible:n.value,"onUpdate:visible":l[5]||(l[5]=o=>n.value=o),width:"500px"},{default:t(()=>[z((y(),x(M,{model:e,"label-width":"100px",class:"user-form"},{default:t(()=>[a(u,{label:"用户名"},{default:t(()=>[a(V,{modelValue:e.username,"onUpdate:modelValue":l[0]||(l[0]=o=>e.username=o),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),a(u,{label:"昵称"},{default:t(()=>[a(V,{modelValue:e.name,"onUpdate:modelValue":l[1]||(l[1]=o=>e.name=o),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),a(u,{label:"密码"},{default:t(()=>[a(V,{modelValue:e.password,"onUpdate:modelValue":l[2]||(l[2]=o=>e.password=o),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),a(u,{label:"是否激活"},{default:t(()=>[a(D,{modelValue:e.status,"onUpdate:modelValue":l[3]||(l[3]=o=>e.status=o)},null,8,["modelValue"])]),_:1}),a(u,{label:"备注"},{default:t(()=>[a(V,{modelValue:e.description,"onUpdate:modelValue":l[4]||(l[4]=o=>e.description=o),type:"textarea",placeholder:"请输入备注",rows:3},null,8,["modelValue"])]),_:1}),a(u,null,{default:t(()=>[a(U,{onClick:N},{default:t(()=>l[6]||(l[6]=[C("取消")])),_:1}),a(U,{type:"primary",onClick:k,loading:m.value},{default:t(()=>l[7]||(l[7]=[C("确定")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])),[[B,p.value]])]),_:1},8,["visible"])}}});export{O as _};
//# sourceMappingURL=Edit.vue_vue_type_script_setup_true_lang-dbZplW5J.js.map
