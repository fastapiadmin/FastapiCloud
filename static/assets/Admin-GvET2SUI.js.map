{"version":3,"file":"Admin-GvET2SUI.js","sources":["../../src/views/Authorization/Admin/Admin.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { getUserList, deleteUser } from '@/api/user'\nimport type { UserTable, UserQuery } from '@/api/user/types'\nimport { ContentWrap } from '@/components/ContentWrap'\nimport SearchComponent from './components/SearchComponent.vue'\nimport AddComponent from './components/Add.vue'\nimport EditComponent from './components/Edit.vue'\nimport DetailComponent from './components/Detail.vue'\n\nconst router = useRouter()\nconst users = ref<UserTable[]>([])\nconst loading = ref(false)\nconst total = ref(0)\nconst currentPage = ref(1)\nconst pageSize = ref(10)\n\n// 查询参数\nconst query = ref<UserQuery>({\n  page: currentPage.value,\n  size: pageSize.value\n})\n\n// 加载用户列表\nconst loadUsers = async () => {\n  loading.value = true\n  try {\n    query.value.page = currentPage.value\n    query.value.size = pageSize.value\n    const response = await getUserList(query.value)\n    users.value = response.data.items\n    total.value = response.data.total\n  } catch (error) {\n    ElMessage.error('加载用户列表失败')\n    console.error('加载用户列表失败:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// 分页变更\nconst handlePageChange = () => {\n  // Element Plus pagination updates v-model bindings directly\n  loadUsers()\n}\n\n// 搜索用户\nconst handleSearch = () => {\n  currentPage.value = 1\n  loadUsers()\n}\n\n// 重置搜索\nconst handleReset = () => {\n  currentPage.value = 1\n  loadUsers()\n}\n\n// 跳转到创建用户页面\nconst handleCreate = () => {\n  router.push('/users/create')\n}\n\n// 跳转到编辑用户页面\nconst handleEdit = (user: UserTable) => {\n  router.push(`/users/${user.id}/edit`)\n}\n\n// 跳转到用户详情页面\nconst handleDetail = (user: UserTable) => {\n  router.push(`/users/${user.id}`)\n}\n\n// 删除用户\nconst handleDelete = async (user: UserTable) => {\n  try {\n    await ElMessageBox.confirm(`确定要删除用户 ${user.username} 吗？`, '确认删除', {\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      type: 'warning'\n    })\n    await deleteUser(user.id)\n    ElMessage.success('删除成功')\n    loadUsers()\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('删除失败')\n      console.error('Delete user error:', error)\n    }\n  }\n}\n\n// 组件挂载时加载用户列表\nonMounted(() => {\n  loadUsers()\n})\n</script>\n\n<template>\n  <ContentWrap>\n    <!-- 搜索和操作栏 -->\n    <el-card>\n      <SearchComponent v-model=\"query\" @search=\"handleSearch\" @reset=\"handleReset\" />\n      <div class=\"action-bar\">\n        <el-button type=\"primary\" @click=\"handleCreate\">创建用户</el-button>\n      </div>\n    </el-card>\n\n    <el-card class=\"user-list-card\" shadow=\"never\" border=\"false\" title=\"用户列表\">\n      <!-- 用户列表 -->\n      <el-table v-loading=\"loading\" :data=\"users\" stripe border style=\"width: 100%\">\n        <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\n        <el-table-column prop=\"username\" label=\"用户名\" />\n        <el-table-column prop=\"name\" label=\"昵称\" />\n        <el-table-column prop=\"status\" label=\"状态\" width=\"120\">\n          <template #default=\"scope\">\n            <el-tag type=\"success\" v-if=\"scope.row.status\"> ✅ 激活 </el-tag>\n            <el-tag type=\"danger\" v-else> ❌ 未激活 </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"created_time\" label=\"创建时间\" width=\"180\" />\n        <el-table-column prop=\"updated_time\" label=\"更新时间\" width=\"180\" />\n        <el-table-column label=\"操作\" width=\"240\">\n          <template #default=\"scope\">\n            <el-button size=\"small\" @click=\"handleDetail(scope.row)\">详情</el-button>\n            <el-button type=\"primary\" size=\"small\" @click=\"handleEdit(scope.row)\">编辑</el-button>\n            <el-button type=\"danger\" size=\"small\" @click=\"handleDelete(scope.row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <template #footer>\n        <!-- 分页 -->\n        <el-pagination\n          v-model:current-page=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          :page-sizes=\"[5, 10, 20, 50]\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n          @size-change=\"handlePageChange\"\n          @current-change=\"handlePageChange\"\n        />\n      </template>\n    </el-card>\n\n    <AddComponent />\n    <EditComponent />\n    <DetailComponent />\n  </ContentWrap>\n</template>\n\n<style scoped></style>\n"],"names":["router","useRouter","users","ref","loading","total","currentPage","pageSize","query","loadUsers","__async","response","getUserList","error","ElMessage","handlePageChange","handleSearch","handleReset","handleCreate","handleEdit","user","handleDetail","handleDelete","ElMessageBox","deleteUser","onMounted"],"mappings":"o7BAYA,MAAMA,EAASC,EAAU,EACnBC,EAAQC,EAAiB,EAAE,EAC3BC,EAAUD,EAAI,EAAK,EACnBE,EAAQF,EAAI,CAAC,EACbG,EAAcH,EAAI,CAAC,EACnBI,EAAWJ,EAAI,EAAE,EAGjBK,EAAQL,EAAe,CAC3B,KAAMG,EAAY,MAClB,KAAMC,EAAS,KAAA,CAChB,EAGKE,EAAY,IAAYC,EAAA,sBAC5BN,EAAQ,MAAQ,GACZ,GAAA,CACII,EAAA,MAAM,KAAOF,EAAY,MACzBE,EAAA,MAAM,KAAOD,EAAS,MAC5B,MAAMI,EAAW,MAAMC,EAAYJ,EAAM,KAAK,EACxCN,EAAA,MAAQS,EAAS,KAAK,MACtBN,EAAA,MAAQM,EAAS,KAAK,YACrBE,EAAO,CACdC,EAAU,MAAM,UAAU,EAClB,QAAA,MAAM,YAAaD,CAAK,CAAA,QAChC,CACAT,EAAQ,MAAQ,EAAA,CAEpB,GAGMW,EAAmB,IAAM,CAEnBN,EAAA,CACZ,EAGMO,EAAe,IAAM,CACzBV,EAAY,MAAQ,EACVG,EAAA,CACZ,EAGMQ,EAAc,IAAM,CACxBX,EAAY,MAAQ,EACVG,EAAA,CACZ,EAGMS,EAAe,IAAM,CACzBlB,EAAO,KAAK,eAAe,CAC7B,EAGMmB,EAAcC,GAAoB,CACtCpB,EAAO,KAAK,UAAUoB,EAAK,EAAE,OAAO,CACtC,EAGMC,EAAgBD,GAAoB,CACxCpB,EAAO,KAAK,UAAUoB,EAAK,EAAE,EAAE,CACjC,EAGME,EAAsBF,GAAoBV,EAAA,sBAC1C,GAAA,CACF,MAAMa,EAAa,QAAQ,WAAWH,EAAK,QAAQ,MAAO,OAAQ,CAChE,kBAAmB,KACnB,iBAAkB,KAClB,KAAM,SAAA,CACP,EACK,MAAAI,EAAWJ,EAAK,EAAE,EACxBN,EAAU,QAAQ,MAAM,EACdL,EAAA,QACHI,EAAO,CACVA,IAAU,WACZC,EAAU,MAAM,MAAM,EACd,QAAA,MAAM,qBAAsBD,CAAK,EAC3C,CAEJ,GAGA,OAAAY,EAAU,IAAM,CACJhB,EAAA,CAAA,CACX"}