const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard-BIWTC4GL.js","assets/vue-Cb9WPcpC.js","assets/rolldown-runtime-DGruFWvd.js","assets/vue-C4WgAt2e.css","assets/dashboard-DYNspkW9.css","assets/user-Bn_IDhH6.js","assets/axios-ChWArd3X.js","assets/user-k5U1TmAg.css","assets/detail-BX9WAwMj.js","assets/detail-pV6roM3M.css","assets/login-CiwxQGVf.js","assets/login-BHoVi6TM.css"])))=>i.map(i=>d[i]);
import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{A as t,C as n,D as r,E as i,F as a,J as o,K as s,L as c,M as l,N as u,O as d,P as f,R as p,S as m,T as h,U as g,V as _,Y as v,a as y,b as ee,g as b,h as x,i as S,j as C,k as w,l as T,m as te,n as E,o as D,q as O,r as k,t as ne,w as re,z as A}from"./vue-Cb9WPcpC.js";import{t as ie}from"./axios-ChWArd3X.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var j=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},M={};function N(e,t){let n=A(`router-view`);return c(),l(`div`,null,[w(`main`,null,[f(n)])])}var P=j(M,[[`render`,N]]),F=`/assets/logo-dark-CWeLYVWQ.svg`,I={class:`sidebar-header`},L={key:0,class:`sidebar-title`},R={class:`menu-container`},z=j(a({__name:`Sider`,props:{collapsed:{type:Boolean},activeMenu:{},onCollapseChange:{type:Function}},setup(e){let i=y(),a=[{path:`/dashboard`,name:`dashboard`,label:`首页`,icon:b},{path:`/users`,name:`users`,label:`用户管理`,icon:n}],s=e=>{i.push(e)};return(n,i)=>{let u=A(`el-menu-item`),d=A(`el-menu`),m=A(`el-aside`);return c(),t(m,{width:e.collapsed?`64px`:`220px`,class:o([`sidebar-container`,{"sidebar-collapsed":e.collapsed}])},{default:g(()=>[w(`div`,I,[w(`img`,{src:F,alt:`Logo`,class:o([`sidebar-logo`,{"sidebar-logo-collapsed":e.collapsed}])},null,2),e.collapsed?C(``,!0):(c(),l(`h2`,L,`管理系统`))]),w(`div`,R,[f(d,{"default-active":e.activeMenu,class:`el-menu-vertical`,"background-color":`#001529`,"text-color":`#fff`,"active-text-color":`#409eff`,"unique-opened":``,"collapse-transition":!1},{default:g(()=>[(c(),l(r,null,p(a,e=>f(u,{key:e.path,index:e.path,onClick:t=>s(e.path)},{title:g(()=>[w(`span`,null,v(e.label),1)]),default:g(()=>[f(O(re),{size:18},{default:g(()=>[(c(),t(_(e.icon)))]),_:2},1024)]),_:2},1032,[`index`,`onClick`])),64))]),_:1},8,[`default-active`])])]),_:1},8,[`width`,`class`])}}}),[[`__scopeId`,`data-v-fdc9d1b4`]]),B=ie.create({baseURL:`http://localhost:8000/api`,timeout:1e4,headers:{"Content-Type":`application/json`}});B.interceptors.request.use(e=>{let t=localStorage.getItem(`token`);return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),B.interceptors.response.use(e=>e,e=>{let t=`请求失败，请稍后重试`;if(e.response){let{status:n,data:r}=e.response;switch(n){case 400:t=r.msg||`请求参数错误`;break;case 401:t=r.msg||`未授权，请重新登录`,localStorage.removeItem(`token`),window.location.href=`/login`;break;case 403:t=r.msg||`没有权限访问该资源`;break;case 404:t=r.msg||`请求的资源不存在`;break;case 500:t=r.msg||`服务器内部错误`;break;default:t=r.msg||`请求失败 (${n})`}}else t=e.request?`网络错误，请检查网络连接`:e.message;return console.error(`API Error:`,t),Promise.reject(Error(t))});var V={get:async(e,t)=>(await B.get(e,t)).data,post:async(e,t,n)=>(await B.post(e,t,n)).data,put:async(e,t,n)=>(await B.put(e,t,n)).data,delete:async(e,t)=>(await B.delete(e,t)).data};const H=async e=>{let t=await V.post(`/login`,new URLSearchParams({username:e.username,password:e.password}),{headers:{"Content-Type":`application/x-www-form-urlencoded`}});return t.data&&t.data.access_token&&localStorage.setItem(`token`,t.data.access_token),t},U=async()=>{try{return await V.post(`/logout`)}finally{localStorage.removeItem(`token`)}},W=async e=>V.get(`/users`,{params:e}),G=async e=>V.post(`/user`,e),K=async e=>V.get(`/user/${e}`),q=async(e,t)=>V.put(`/user/${e}`,t),J=async e=>V.delete(`/user/${e}`);var ae={class:`header-left`},oe={class:`header-right`},se={class:`user-info`},ce={key:0,class:`user-name`},le=j(a({__name:`Header`,props:{collapsed:{type:Boolean},onCollapseChange:{type:Function}},setup(e){let n=y(),i=S(),a=d(()=>{let e=[],t=i.matched;for(let n of t){if(n.path===`/`)continue;let t=``;switch(n.path){case`/dashboard`:t=`仪表盘`;break;case`/users`:t=`用户管理`;break;case`/users/:id`:t=`用户详情`;break;default:t=n.meta?.title||n.name||`未知`}e.push({path:n.path,title:t})}return e}),o=async()=>{try{await U(),T.success(`退出登录成功`),n.push(`/login`)}catch(e){T.error(`退出登录失败`),console.error(`Logout error:`,e)}};return(n,i)=>{let s=A(`el-icon`),d=A(`el-button`),h=A(`el-breadcrumb-item`),_=A(`el-breadcrumb`),y=A(`el-avatar`),b=A(`el-dropdown-item`),S=A(`el-dropdown-menu`),T=A(`el-dropdown`),E=A(`el-header`);return c(),t(E,{class:`header-container`},{default:g(()=>[w(`div`,ae,[f(d,{link:``,onClick:i[0]||=t=>e.onCollapseChange(!e.collapsed),class:`header-collapse-btn`},{default:g(()=>[f(s,null,{default:g(()=>[e.collapsed?(c(),t(O(te),{key:0})):(c(),t(O(x),{key:1}))]),_:1})]),_:1}),f(_,{"separator-class":`el-icon-arrow-right`,class:`header-breadcrumb`},{default:g(()=>[f(h,{to:{path:`/dashboard`}},{default:g(()=>[...i[1]||=[u(`首页`,-1)]]),_:1}),(c(!0),l(r,null,p(a.value,(e,n)=>(c(),t(h,{key:n,to:e.path},{default:g(()=>[u(v(e.title),1)]),_:2},1032,[`to`]))),128))]),_:1})]),w(`div`,oe,[f(T,null,{dropdown:g(()=>[f(S,null,{default:g(()=>[f(b,{divided:``},{default:g(()=>[f(s,null,{default:g(()=>[f(O(ee))]),_:1}),w(`span`,{onClick:o},`退出登录`)]),_:1})]),_:1})]),default:g(()=>[w(`span`,se,[f(y,{size:32,class:`user-avatar`},{default:g(()=>[f(O(m))]),_:1}),e.collapsed?C(``,!0):(c(),l(`span`,ce,`管理员`))])]),_:1})])]),_:1})}}}),[[`__scopeId`,`data-v-0e0d1924`]]),ue=j(a({__name:`Footer`,setup(e){return(e,n)=>{let r=A(`el-footer`);return c(),t(r,{class:`footer-container`},{default:g(()=>[...n[0]||=[w(`span`,null,`© 2026 用户管理系统`,-1)]]),_:1})}}}),[[`__scopeId`,`data-v-54e13190`]]),Y=j(a({__name:`index`,setup(e){let n=S(),r=s(!1),i=d(()=>n.path),a=e=>{r.value=e};return(e,n)=>{let o=A(`router-view`),s=A(`el-main`),l=A(`el-container`);return c(),t(l,{class:`layout-container`},{default:g(()=>[f(z,{collapsed:r.value,"active-menu":i.value,"on-collapse-change":a},null,8,[`collapsed`,`active-menu`]),f(l,{class:`main-container`,direction:`vertical`},{default:g(()=>[f(le,{collapsed:r.value,"on-collapse-change":a},null,8,[`collapsed`]),f(s,{class:`content-container`},{default:g(()=>[f(o,null,{default:g(({Component:e})=>[f(h,{name:`fade-transform`,mode:`out-in`},{default:g(()=>[(c(),t(_(e)))]),_:2},1024)]),_:1})]),_:1}),f(ue)]),_:1})]),_:1})}}}),[[`__scopeId`,`data-v-d28416dc`]]),de=`modulepreload`,fe=function(e){return`/`+e},X={};const Z=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=fe(t,n),t in X)return;X[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:de,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};var pe=[{path:`/`,redirect:`/login`},{path:`/`,name:`layout`,component:Y,meta:{requiresAuth:!0},children:[{path:`/dashboard`,name:`dashboard`,meta:{icon:`HomeFilled`},component:()=>Z(()=>import(`./dashboard-BIWTC4GL.js`),__vite__mapDeps([0,1,2,3,4]))},{path:`/users`,name:`users`,meta:{icon:`User`},component:()=>Z(()=>import(`./user-Bn_IDhH6.js`),__vite__mapDeps([5,1,2,3,6,7]))},{path:`/users/:id`,name:`user-detail`,component:()=>Z(()=>import(`./detail-BX9WAwMj.js`),__vite__mapDeps([8,1,2,3,6,9])),meta:{title:`用户详情`}}]},{path:`/login`,name:`login`,component:()=>Z(()=>import(`./login-CiwxQGVf.js`),__vite__mapDeps([10,1,2,3,6,11])),meta:{requiresAuth:!1}}],Q=E({history:k(`/`),routes:pe});Q.beforeEach((e,t,n)=>{let r=!!localStorage.getItem(`token`);e.meta.requiresAuth&&!r?n({name:`login`}):e.path===`/login`&&r?n({name:`dashboard`}):n()});var me=Q,$=i(P);$.use(D,{locale:ne}),$.use(me),$.mount(`#app`);export{H as a,j as c,W as i,J as n,q as o,K as r,F as s,G as t};