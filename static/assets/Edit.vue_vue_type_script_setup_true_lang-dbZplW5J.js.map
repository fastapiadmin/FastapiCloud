{"version":3,"file":"Edit.vue_vue_type_script_setup_true_lang-dbZplW5J.js","sources":["../../src/views/Authorization/Admin/components/Edit.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref, reactive, onMounted, computed } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { ElMessage } from 'element-plus'\nimport { updateUser, getUserDetail } from '@/api/user'\nimport type { UserForm } from '@/api/user/types'\n\nconst router = useRouter()\nconst route = useRoute()\nconst userId = computed(() => route.params.id as string)\n\nconst form = reactive<UserForm>({\n  username: '',\n  name: '',\n  status: true,\n  description: '',\n  password: ''\n})\n\nconst loading = ref(false)\nconst loadingUser = ref(false)\nconst visible = ref(true)\n\n// 加载用户数据\nconst loadUser = async () => {\n  loadingUser.value = true\n  try {\n    const response = await getUserDetail(Number(userId.value))\n    const user = response.data\n    // 填充表单数据\n    form.username = user.username\n    form.name = user.name\n    form.status = user.status\n    form.description = user.description || ''\n  } catch (error) {\n    ElMessage.error('加载用户数据失败')\n    console.error('Load user error:', error)\n    router.push('/users')\n  } finally {\n    loadingUser.value = false\n  }\n}\n\n// 验证表单\nconst validateForm = (): boolean => {\n  if (!form.username) {\n    ElMessage.warning('请输入用户名')\n    return false\n  }\n  if (!form.name) {\n    ElMessage.warning('请输入昵称')\n    return false\n  }\n  return true\n}\n\n// 处理表单提交\nconst handleSubmit = async () => {\n  if (!validateForm()) return\n  loading.value = true\n  try {\n    await updateUser(Number(userId.value), form)\n    ElMessage.success('用户更新成功')\n    router.push('/users')\n  } catch (error) {\n    ElMessage.error('更新用户失败')\n    console.error('Update user error:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// 取消操作\nconst handleCancel = () => {\n  router.push('/users')\n}\n\n// 组件挂载时加载用户数据\nonMounted(() => {\n  loadUser()\n})\n</script>\n\n<template>\n  <el-dialog title=\"编辑用户\" v-model:visible=\"visible\" width=\"500px\">\n    <el-form v-loading=\"loadingUser\" :model=\"form\" label-width=\"100px\" class=\"user-form\">\n      <el-form-item label=\"用户名\">\n        <el-input v-model=\"form.username\" placeholder=\"请输入用户名\" />\n      </el-form-item>\n      <el-form-item label=\"昵称\">\n        <el-input v-model=\"form.name\" placeholder=\"请输入昵称\" />\n      </el-form-item>\n      <el-form-item label=\"密码\">\n        <el-input v-model=\"form.password\" type=\"password\" placeholder=\"请输入密码\" />\n      </el-form-item>\n      <el-form-item label=\"是否激活\">\n        <el-switch v-model=\"form.status\" />\n      </el-form-item>\n      <el-form-item label=\"备注\">\n        <el-input v-model=\"form.description\" type=\"textarea\" placeholder=\"请输入备注\" :rows=\"3\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button @click=\"handleCancel\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handleSubmit\" :loading=\"loading\">确定</el-button>\n      </el-form-item>\n    </el-form>\n  </el-dialog>\n</template>\n\n<style scoped></style>\n"],"names":["router","useRouter","route","useRoute","userId","computed","form","reactive","loading","ref","loadingUser","visible","loadUser","__async","user","getUserDetail","error","ElMessage","validateForm","handleSubmit","updateUser","handleCancel","onMounted"],"mappings":"wfAOA,MAAMA,EAASC,EAAU,EACnBC,EAAQC,EAAS,EACjBC,EAASC,EAAS,IAAMH,EAAM,OAAO,EAAY,EAEjDI,EAAOC,EAAmB,CAC9B,SAAU,GACV,KAAM,GACN,OAAQ,GACR,YAAa,GACb,SAAU,EAAA,CACX,EAEKC,EAAUC,EAAI,EAAK,EACnBC,EAAcD,EAAI,EAAK,EACvBE,EAAUF,EAAI,EAAI,EAGlBG,EAAW,IAAYC,EAAA,sBAC3BH,EAAY,MAAQ,GAChB,GAAA,CAEF,MAAMI,GADW,MAAMC,EAAc,OAAOX,EAAO,KAAK,CAAC,GACnC,KAEtBE,EAAK,SAAWQ,EAAK,SACrBR,EAAK,KAAOQ,EAAK,KACjBR,EAAK,OAASQ,EAAK,OACdR,EAAA,YAAcQ,EAAK,aAAe,SAChCE,EAAO,CACdC,EAAU,MAAM,UAAU,EAClB,QAAA,MAAM,mBAAoBD,CAAK,EACvChB,EAAO,KAAK,QAAQ,CAAA,QACpB,CACAU,EAAY,MAAQ,EAAA,CAExB,GAGMQ,EAAe,IACdZ,EAAK,SAILA,EAAK,KAIH,IAHLW,EAAU,QAAQ,OAAO,EAClB,KALPA,EAAU,QAAQ,QAAQ,EACnB,IAULE,EAAe,IAAYN,EAAA,sBAC3B,GAACK,IACL,CAAAV,EAAQ,MAAQ,GACZ,GAAA,CACF,MAAMY,EAAW,OAAOhB,EAAO,KAAK,EAAGE,CAAI,EAC3CW,EAAU,QAAQ,QAAQ,EAC1BjB,EAAO,KAAK,QAAQ,QACbgB,EAAO,CACdC,EAAU,MAAM,QAAQ,EAChB,QAAA,MAAM,qBAAsBD,CAAK,CAAA,QACzC,CACAR,EAAQ,MAAQ,EAAA,EAEpB,GAGMa,EAAe,IAAM,CACzBrB,EAAO,KAAK,QAAQ,CACtB,EAGA,OAAAsB,EAAU,IAAM,CACLV,EAAA,CAAA,CACV"}